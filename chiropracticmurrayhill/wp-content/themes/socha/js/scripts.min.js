// add your custom scripts here
// as the page loads, call these scripts
function pin_load(){js=$('script[src*="assets.pinterest.com/js/pinit.js"]');js.remove();var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src="http://assets.pinterest.com/js/pinit.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}jQuery(function(e){});Modernizr.addTest("ipad",function(){return!!navigator.userAgent.match(/iPad/i)});Modernizr.addTest("iphone",function(){return!!navigator.userAgent.match(/iPhone/i)});Modernizr.addTest("ipod",function(){return!!navigator.userAgent.match(/iPod/i)});Modernizr.addTest("appleios",function(){return Modernizr.ipad||Modernizr.ipod||Modernizr.iphone});Modernizr.addTest("positionfixed",function(){var e=document.createElement("div"),t=e.cloneNode(!1),n=!1,r=document.body||function(){n=!0;return document.documentElement.appendChild(document.createElement("body"))}(),i=r.style.cssText;r.style.cssText="padding:0;margin:0";e.style.cssText="position:fixed;top:42px";r.appendChild(e);r.appendChild(t);var s=e.offsetTop!==t.offsetTop;r.removeChild(e);r.removeChild(t);r.style.cssText=i;n&&document.documentElement.removeChild(r);return s&&!Modernizr.appleios});Modernizr.load([{test:Modernizr.borderradius,nope:[ale.template_dir+"/js/libs/selectivizr.min.js",ale.template_dir+"/js/libs/respond.min.js"]},{test:Modernizr.touch,yep:ale.template_dir+"/css/touch.css"}]);jQuery(function(e){var t=e("#post").length,n=e("article.post"),r=parseInt(ale.is_mobile),i={animation:"slide",slideshow:!1,controlNav:!1};e(document).ajaxComplete(function(){try{if(!n.length)return;FB.XFBML.parse();gapi.plusone.go();twttr.widgets.load();pin_load()}catch(e){}});e("a[rel$=external]").each(function(){e(this).attr("target","_blank")});e.fn.init_posts=function(){var s=function(t){t.post.siblings(".open-post").find("a.toggle").trigger("click",{hide:!0});var n=t.post.find("span.loading");if(t.more.is(":empty")){t.post.addClass("post-loading");n.css("visibility","visible");t.more.load(ale.ajax_load_url,{action:"aletheme_load_post",id:t.post.data("post-id")},function(){n.remove();t.more.slideDown(400,function(){t.post.addClass("open-post");t.toggler.text("Close Post");e(".video",t.more).fitVids();t.scroll&&t.scroll.scrollTo("fast")});u(t.post)})}else t.more.slideDown(400,function(){t.post.addClass("open-post");t.toggler.text("Close Post");t.scroll&&t.scroll.scrollTo("fast")})},o=function(t,n){t.preventDefault();var r={toggler:e(this),scroll:!1},i=e.extend({comments:!1,hide:!1,add_comment:!1},n);r.post=r.toggler.parents("article.post");r.more=r.post.find(".full");if(r.more.is(":visible")){i.hide==1?r.more.hide():r.more.slideUp(400);r.toggler.text("Open Post");r.post.removeClass("open-post")}else{typeof t.originalEvent!="undefined"&&(r.scroll=r.post);s(r)}},u=function(t){var n=e("section.respond",t),r=e("form",n),i=e("p.error",r),s=e(".cancel-comment-reply a",n),o=e("section.comments",t);e("a.comment-reply-link",t).on("click",function(r){r.preventDefault();var i=e(this).parents("li.comment");i.find(">div").append(n);s.show();n.find("input[name=comment_post_ID]").val(t.data("post-id"));n.find("input[name=comment_parent]").val(i.data("comment-id"));n.find("input:first").focus()}).attr("onclick","");s.on("click",function(r){r.preventDefault();o.after(n);n.find("input[name=comment_post_ID]").val(t.data("post-id"));n.find("input[name=comment_parent]").val(0);e(this).hide()});r.ajaxForm({beforeSubmit:function(){i.text("").hide()},success:function(t){var r=e.parseJSON(t);if(r.error){i.html(r.msg).slideDown("fast");return}var u=n.find("input[name=comment_parent]").val(),a=e(r.html),f;a.hide();if(u==0){f=o.find("ol");if(!f.length){f=e('<ol class="commentlist"></ol>');o.append(f)}}else{f=e("#comment-"+u).parent().find("ul");if(!f.length){f=e('<ul class="children"></ul>');e("#comment-"+u).parent().append(f)}s.trigger("click")}f.append(a);a.fadeIn("fast").scrollTo();n.find("textarea").clearFields()},error:function(e){var t=e.responseText.match(/\<p\>(.*)<\/p\>/)[1];typeof t=="undefined"&&(t="Something went wrong. Please reload the page and try again.");i.html(t).slideDown("fast")}})};e(this).each(function(){var t=e(this);e(window).load(function(){e(".preview .flexslider",t).flexslider(i)});if(!r&&ale.ajax_posts){e("a.toggle",t).click(o);e(".video",t).fitVids();e(".preview figure a",t).click(function(t){t.preventDefault();e(this).parents("article.post").find("a.toggle").trigger("click")})}});t&&parseInt(ale.ajax_comments)&&u(n);parseInt(ale.ajax_open_single)&&!t&&n.length==1&&n.find("a.toggle").trigger("click")};n.init_posts();e.fn.init_gallery=function(){e(this).each(function(){var t=e(this);e(window).load(function(){e(".flexslider",t).flexslider(i)})})};e("#gallery").init_gallery();e.fn.init_archives=function(){e(this).each(function(){var t=e(this),n=e("#archives-active-year"),r=e("div.months div.year-months",t),i=e("a.up, a.down",t),s,o,u,a=!1;if(r.length==1){i.remove();s=r.filter(":first").addClass("year-active").show();n.text(s.attr("id").replace(/[^0-9]*/,""));return}i.click(function(t){t.preventDefault();if(a)return;var s=e(this);a=!0;i.css("visibility","visible");var o=r.filter(".year-active");if(s.hasClass("up")){u=o.prev();u.length||(u=r.filter(":last"))}else{u=o.next();u.length||(u=r.filter(":first"))}o.removeClass("year-active").fadeOut(150,function(){u.addClass("year-active").fadeIn(150,function(){a=!1});n.text(u.attr("id").replace(/[^0-9]*/,""));s.hasClass("up")?u.prev().length||i.filter(".up").css("visibility","hidden"):u.next().length||i.filter(".down").css("visibility","hidden")})});s=r.filter(":first").addClass("year-active").show();n.text(s.attr("id").replace(/[^0-9]*/,""));i.filter(".up").css("visibility","hidden")})};e("#archives .ale-archives").init_archives();e(window).load(function(){e("#homepage > .flexslider").flexslider(i)})});jQuery(function(e){if(!Modernizr.input.placeholder){e(this).find("[placeholder]").each(function(){e(this).val(e(this).attr("placeholder"))});e("[placeholder]").focus(function(){if(e(this).val()==e(this).attr("placeholder")){e(this).val("");e(this).removeClass("placeholder")}}).blur(function(){if(e(this).val()==""||e(this).val()==e(this).attr("placeholder")){e(this).val(e(this).attr("placeholder"));e(this).addClass("placeholder")}});e("[placeholder]").closest("form").submit(function(){e(this).find("[placeholder]").each(function(){e(this).val()==e(this).attr("placeholder")&&e(this).val("")})})}});